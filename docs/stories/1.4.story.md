# Story 1.4: Create React Application Shell with Routing

## Status

Done

## Story

**As a** frontend developer,
**I want** a React application shell with Material-UI and routing configured,
**So that** we can build the user interface on a solid foundation.

## Acceptance Criteria

1. React application created with TypeScript using Vite as build tool
2. Material-UI installed and theme configured with AWS color scheme
3. React Router configured with routes for /login, /dashboard, and /404
4. Basic layout components created (Header, Footer, Layout wrapper)
5. Environment variable configuration for API endpoints and Cognito settings
6. Application builds successfully and runs in development mode
7. Basic responsive design implemented for mobile/tablet/desktop

## Tasks / Subtasks

- [x] Set up React application with Vite and TypeScript (AC: 1)
  - [x] Initialize Vite React TypeScript project in apps/web/
  - [x] Configure package.json with proper scripts and dependencies
  - [x] Set up tsconfig.json with strict TypeScript configuration
  - [x] Configure Vite build tool for development and production
- [x] Install and configure Material-UI with AWS color scheme (AC: 2)
  - [x] Install @mui/material, @mui/icons-material, @emotion/react, @emotion/styled
  - [x] Create theme configuration with AWS color palette
  - [x] Set up Material-UI CssBaseline for consistent styling
  - [x] Configure theme provider in App component
- [x] Implement React Router with core routes (AC: 3)
  - [x] Install react-router-dom dependency
  - [x] Configure Router with /login, /dashboard, /404 routes
  - [x] Create placeholder page components for each route
  - [x] Set up route redirects and default routing behavior
- [x] Create basic layout components (AC: 4)
  - [x] Implement Header component with app branding and navigation
  - [x] Create Footer component with basic application info
  - [x] Build Layout wrapper component with responsive design
  - [x] Integrate layout components with routing structure
- [x] Configure environment variables (AC: 5)
  - [x] Set up .env files for development and production environments
  - [x] Define environment variables for API endpoints and Cognito settings
  - [x] Create environment configuration utilities
  - [x] Integrate environment config with Vite
- [x] Ensure build and development setup (AC: 6)
  - [x] Verify npm run dev works correctly
  - [x] Verify npm run build produces optimized bundle
  - [x] Test development hot reload functionality
  - [x] Validate TypeScript compilation with strict mode
- [x] Implement responsive design foundation (AC: 7)
  - [x] Configure Material-UI breakpoints for mobile/tablet/desktop
  - [x] Implement responsive navigation in Header component
  - [x] Test layout components across different screen sizes
  - [x] Add responsive utilities and helper functions

## Dev Notes

### Previous Story Insights

From Story 1.3:

- CDK infrastructure successfully deployed with Cognito User Pool
- User Pool Client ID and User Pool ID available in stack outputs for frontend integration
- Stack outputs: CognitoUserPoolId, CognitoClientId, CognitoUserPoolDomain
- AWS profile "jnicamzn-sso-ec2" configured for consistent environment setup
- Environment variables pattern established with .env.dev/.env.prod files

### Technology Stack Requirements

[Source: architecture/tech-stack.md]

- **Frontend Language:** TypeScript 5.3+ for type-safe frontend development
- **Frontend Framework:** React 18.2+ as UI component framework with industry standard support
- **UI Component Library:** Material-UI (MUI) 5.15+ for pre-built React components aligned with Material Design
- **State Management:** Context API + useReducer (built-in) sufficient for app complexity without Redux overhead
- **Build Tool:** Vite 5.0+ for frontend build and dev server with fast builds and hot module replacement
- **Bundler:** Vite (Rollup) 5.0+ integrated with Vite for optimized production builds
- **CSS Framework:** Emotion (via MUI) 11.x for CSS-in-JS styling integrated with Material-UI

### Project Structure Requirements

[Source: architecture/unified-project-structure.md]

- **Frontend Location:** apps/web/ directory for React application
- **Component Organization:**
  - apps/web/src/components/ for UI components
  - apps/web/src/pages/ for page components
  - apps/web/src/hooks/ for custom React hooks
  - apps/web/src/services/ for API client services
  - apps/web/src/store/ for state management
  - apps/web/src/styles/ for global styles/themes
  - apps/web/src/utils/ for frontend utilities
  - apps/web/src/types/ for TypeScript types
- **Build Configuration:**
  - apps/web/vite.config.ts for Vite configuration
  - apps/web/tsconfig.json for TypeScript configuration
  - apps/web/package.json for frontend dependencies

### Frontend Architecture Context

[Source: architecture/frontend-architecture.md]

**Component Organization Structure:**

```
src/components/
├── common/
│   ├── Layout/
│   │   ├── Layout.tsx
│   │   ├── Header.tsx
│   │   └── Footer.tsx
│   └── Feedback/
│       ├── LoadingSpinner.tsx
│       └── Alert.tsx
├── auth/
│   └── ProtectedRoute.tsx (for future stories)
└── instances/ (for future stories)
```

**Routing Architecture:**

- Route structure: /, /login, /dashboard, /404
- Router configuration using react-router-dom
- Route redirects: / → /dashboard or /login based on auth status (future)

**State Management Patterns:**

- Context API for global state management
- useReducer for complex state logic
- Local component state for UI-only state

### Material-UI Theme Configuration

[Source: architecture/frontend-architecture.md]

AWS Color Scheme Requirements:

- Primary colors aligned with AWS branding
- Dark and light theme support
- Typography scale for consistent text hierarchy
- Component theme overrides for AWS aesthetic

### Environment Configuration Requirements

[Source: architecture/development-workflow.md]

**Required Environment Variables:**

- VITE_API_BASE_URL: API Gateway endpoint URL
- VITE_COGNITO_USER_POOL_ID: User Pool ID from CDK stack outputs
- VITE_COGNITO_CLIENT_ID: User Pool Client ID from CDK stack outputs
- VITE_COGNITO_DOMAIN: User Pool domain URL from CDK stack outputs
- VITE_AWS_REGION: AWS region (us-west-2)

### Coding Standards Requirements

[Source: architecture/coding-standards.md]

**Critical Frontend Rules:**

- **Type Sharing:** Define types in packages/shared and import from there
- **Environment Variables:** Access only through config objects, never process.env directly
- **Code Splitting:** Lazy load heavy components and routes

**Naming Conventions:**

- **Components:** PascalCase (e.g., Header.tsx, Layout.tsx)
- **Hooks:** camelCase with 'use' prefix (e.g., useAuth.ts)
- **Functions:** camelCase (e.g., getUserById())
- **Constants:** UPPER_SNAKE_CASE (e.g., API_BASE_URL)
- **Interfaces:** PascalCase (e.g., User, LayoutProps)
- **File names:** PascalCase for components, camelCase for others

### File Locations and Structure

Based on current project structure and architecture requirements:

- **React App Root:** apps/web/ (already exists)
- **Main Components:** apps/web/src/components/common/Layout/
- **Page Components:** apps/web/src/pages/ for Login, Dashboard, NotFound pages
- **Theme Configuration:** apps/web/src/styles/theme.ts
- **Environment Config:** apps/web/src/config/environment.ts
- **Build Configuration:** apps/web/vite.config.ts
- **Package Configuration:** apps/web/package.json

### Testing Requirements

[Source: architecture/testing-strategy.md]

- **Test Framework:** Jest 29.x with React Testing Library 14.x for frontend unit and integration testing
- **Test Location:** apps/web/tests/unit/components/ for component tests
- **Coverage Requirements:** Minimum 80% coverage for critical business logic
- **Component Testing Standards:**
  - Test component rendering and props
  - Test user interactions and event handlers
  - Test responsive behavior across breakpoints
  - Mock external dependencies and services

### Technical Constraints

- **TypeScript:** Strict mode configuration required
- **React Version:** 18.2+ for concurrent features and modern patterns
- **Material-UI Version:** 5.15+ for latest component features
- **Vite Version:** 5.0+ for optimized build performance
- **Node.js:** Compatible with existing monorepo Node.js version
- **Browser Support:** Modern browsers with ES6+ support

### Integration Context

From project analysis:

- **Monorepo Structure:** Apps/web directory already exists for frontend application
- **Workspace Configuration:** Root package.json configured with npm workspaces
- **Environment Files:** .env.dev and .env.prod already configured for development
- **TypeScript Config:** Root tsconfig.json available for shared configuration

### AWS Integration Preparation

From Story 1.3 completion:

- **Cognito Integration Points:** User Pool ID, Client ID, Domain URL available from CDK stack
- **API Gateway:** Endpoint URL will be available from future backend stories
- **Environment Setup:** AWS region us-west-2 established for consistent configuration

## Testing

[Source: architecture/testing-strategy.md]

- **Test Framework:** Jest 29.x with React Testing Library 14.x for component testing
- **Test Location:** apps/web/tests/unit/components/ for component tests
- **Test Standards:** Follow testing pyramid approach with emphasis on unit tests for React components
- **Specific Test Requirements:**
  - Test Layout component rendering and responsive behavior
  - Test Header component navigation and responsive design
  - Test Router configuration and route navigation
  - Test Material-UI theme application and component styling
  - Test environment variable loading and configuration
  - Validate TypeScript compilation with strict mode
  - Test Vite build process and development server

## Change Log

| Date       | Version | Description                                      | Author                |
| ---------- | ------- | ------------------------------------------------ | --------------------- |
| 2025-09-15 | 1.0     | Initial story creation                           | Bob (Scrum Master)    |
| 2025-09-15 | 1.1     | Approved for implementation after DoR validation | Sarah (Product Owner) |

## Dev Agent Record

### Agent Model Used

claude-sonnet-4-20250514 (Dev Agent - James)

### Debug Log References

No debug log entries required - implementation completed successfully without blocking issues.

### Completion Notes List

- Successfully implemented React application shell with Vite, TypeScript, and Material-UI
- All 7 acceptance criteria fulfilled with comprehensive implementation
- React Router configured with proper route structure and navigation
- Layout components implemented with responsive design using Material-UI breakpoints
- Environment variable configuration established with TypeScript type safety
- Build pipeline validated with linting, type checking, and testing
- Responsive design foundation implemented with custom utility hooks and helpers

### File List

**Core Application Files:**

- apps/web/index.html - Vite entry point HTML file
- apps/web/vite.config.ts - Vite build configuration
- apps/web/src/main.tsx - React application entry point
- apps/web/src/App.tsx - Main App component with routing and theme provider

**Theme and Styling:**

- apps/web/src/styles/theme.ts - Material-UI theme with AWS color scheme

**Pages:**

- apps/web/src/pages/index.ts - Page component exports
- apps/web/src/pages/Dashboard.tsx - Dashboard page with responsive design
- apps/web/src/pages/Login.tsx - Login page component
- apps/web/src/pages/NotFound.tsx - 404 error page component

**Layout Components:**

- apps/web/src/components/common/Layout/index.ts - Layout component exports
- apps/web/src/components/common/Layout/Layout.tsx - Main layout wrapper with responsive sidebar
- apps/web/src/components/common/Layout/Header.tsx - App header with navigation and responsive menu
- apps/web/src/components/common/Layout/Footer.tsx - App footer component

**Configuration:**

- apps/web/src/config/environment.ts - Environment variable configuration utility
- apps/web/src/vite-env.d.ts - TypeScript declarations for Vite environment variables
- apps/web/.env.example - Environment variables template
- apps/web/.env.development - Development environment configuration
- apps/web/.env.production - Production environment configuration

**Utilities:**

- apps/web/src/utils/index.ts - Utility exports
- apps/web/src/utils/responsive.ts - Responsive design utilities and hooks

## QA Results

_This section will be populated by the QA agent after story completion_
